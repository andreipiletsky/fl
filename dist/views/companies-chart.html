<div class="companies-chart-container"> <div ng-hide="data.loaded" class="full-height text-primary"> <centered-fa-spinner></centered-fa-spinner> </div> <div ng-show="data.loaded" class="container-fluid smb-static-height pvchart-filters"> <div class="filters-container"> <table width="100%"> <tbody> <tr> <td> <smb-triple-data-switch ng-model="filter.drillType"></smb-triple-data-switch> </td> <td class="text-center" ng-show="filter.wellState !== 4"> <smb-triple-period-switch ng-model="filter.timeKey"></smb-triple-period-switch> <period-counter time-key="filter.timeKey" time-count="filter.timeCount"></period-counter> </td> <td class="text-right"> <smb-triple-type-switch ng-model="filter.wellState"></smb-triple-type-switch> <smb-double-view-switch show-excel="true" excel-handler="getExcel()"></smb-double-view-switch> </td> </tr> </tbody> </table> </div> <div class="sub-heading"> <a class="choice" href="#/physicalData">Данные по всей компании</a> </div> </div> <div ng-show="data.error" class="container-fluid fields-chart-content-container error-container"> <p class="error-message">Не удалось получить данные.</p> </div> <div ng-hide="data.chartsLoaded" class="container-fluid fields-chart-content-container error-container"> <centered-fa-spinner></centered-fa-spinner> </div> <div ng-show="data.chartsLoaded" class="container-fluid companies-chart-content-container"> <div class="charts-container"> <div class="row half-height-padded"> <div class="dash-item one-rows" ng-if="!filter.showDynamic"> <h4 class="dash-item-header"> <button type="button" class="btn btn-default" ng-model="filter.attributeName" bs-options="param as getAttributeNameWithUom(param) for param in data.params" placeholder="{{getAttributeNameWithUom(filter.attributeName)}}" bs-select> <span class="caret"></span> </button> по ДО <span class="switch-type" ng-click="filter.showDynamic = !filter.showDynamic">(посмотреть в динамике)</span><br> <!--             <span  class="dimension">{{data.chartsData.companies.uom}}</span>--> </h4> <div class="dash-item-chart"> <div class="dash-item-chart-wrapper"> <div class="dash-item-chart-container"> <save-svg-btn file-name="Физика {{data.chartsData.companies.displayName}} по ДО"></save-svg-btn> <grouped-bar-chart ng-model="data.chartsData.companies" show-values="filter.showValues" show-average-lines="!filter.hideAllAverageLines && filter.showAverageLines" show-markers="(filter.timeKey === 'year')?filter.showMarkersYear:filter.showMarkers" reverse-markers="filter.reverseMarkers" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" axis-offset-x="50" axis-offset-y="50" bar-colors="(filter.timeKey === 'year')?onlyFactChatsColor:factChatsColor"></grouped-bar-chart> </div> <div class="dash-item-chart-legend" ng-hide="data.splitCharts || !data.chartsData.companies"> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average"><input type="checkbox" ng-model="filter.showAverageLines[0]"> Среднее, {{data.chartsData.companies.averageLines[0].value | round:data.chartsData.companies.roundTo}} {{data.chartsData.companies.uom}}</label></div> <div ng-hide="filter.timeKey === 'year'"> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkers[0][1]"> min/max факт ■</label></div> </div> <div ng-show="filter.timeKey === 'year'"> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYear[0][0]"> min/max факт ▲</label></div> </div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showTable"> Табличное представление</label></div> </div> <div class="dash-item-chart-legend" ng-show="data.splitCharts && data.chartsData.companies"> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average-nns"><input type="checkbox" ng-model="filter.showAverageLines[0]"> Среднее ННС, {{data.chartsData.companies.averageLines[0].value | round:data.chartsData.companies.roundTo}} {{data.chartsData.companies.uom}}</label></div> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average-gs"><input type="checkbox" ng-model="filter.showAverageLines[2]"> Среднее ГС, {{data.chartsData.companies.averageLines[2].value | round:data.chartsData.companies.roundTo}} {{data.chartsData.companies.uom}}</label></div> <div ng-hide="filter.timeKey === 'year'"> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkers[0][1]"> min/max факт ННС ■</label></div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkers[1][1]"> min/max факт ГС ●</label></div> </div> <div ng-show="filter.timeKey === 'year'"> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYear[0][0]"> min/max факт ННС ▲</label></div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYear[1][0]"> min/max факт ГС ■</label></div> </div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showTable"> Табличное представление</label></div> </div> </div> <div class="dash-item-no-data" ng-hide="data.chartsData.companies"><p>Скважины не бурились в этот промежуток времени.</div> </div> </div> <div class="dash-item one-rows" ng-if="filter.showDynamic"> <h4 class="dash-item-header"> <button type="button" class="btn btn-sm btn-default" ng-model="filter.attributeName" bs-options="param as getAttributeNameWithUom(param) for param in data.params" placeholder="{{getAttributeNameWithUom(filter.attributeName)}}" bs-select> <span class="caret"></span> </button> в динамике <span class="switch-type" ng-click="filter.showDynamic = !filter.showDynamic">(посмотреть по ДО)</span> <!--            <br/><span  class="dimension">{{data.chartsData.dynamic.uom}}</span>--> </h4> <div class="dash-item-chart"> <div class="dash-item-chart-wrapper"> <div class="dash-item-chart-container"> <save-svg-btn file-name="Физика {{data.chartsData.dynamic.displayName}} в динамике"></save-svg-btn> <grouped-bar-chart ng-model="data.chartsData.dynamic" show-values="filter.showValues" show-average-lines="!filter.hideAllAverageLines && filter.showAverageLines" show-markers="filter.showMarkersYear" reverse-markers="filter.reverseMarkers" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" axis-offset-x="50" axis-offset-y="50" bar-colors="onlyFactChatsColor"></grouped-bar-chart> </div> <div class="dash-item-chart-legend" ng-hide="data.splitCharts || !data.chartsData.dynamic"> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average"><input type="checkbox" ng-model="filter.showAverageLines[0]"> Среднее, {{data.chartsData.dynamic.averageLines[0].value | round:data.chartsData.dynamic.roundTo}} {{data.chartsData.companies.uom}}</label></div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYear[0][0]"> min/max факт ▲</label></div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showTable"> Табличное представление</label></div> </div> <div class="dash-item-chart-legend" ng-show="data.splitCharts && data.chartsData.dynamic"> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average-nns"><input type="checkbox" ng-model="filter.showAverageLines[0]"> Среднее ННС, {{data.chartsData.dynamic.averageLines[0].value | round:data.chartsData.dynamic.roundTo}} {{data.chartsData.companies.uom}}</label></div> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average-gs"><input type="checkbox" ng-model="filter.showAverageLines[2]"> Среднее ГС, {{data.chartsData.dynamic.averageLines[2].value | round:data.chartsData.dynamic.roundTo}} {{data.chartsData.companies.uom}}</label></div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYear[0][0]"> min/max факт ННС ▲</label></div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYear[1][0]"> min/max факт ГС ■</label></div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showTable"> Табличное представление</label></div> </div> </div> <div class="dash-item-no-data" ng-hide="data.chartsData.dynamic"><p>Скважины не бурились в этот промежуток времени.</div> </div> </div> </div> <div class="table-container" ng-if="filter.showTable && data.chartsData.companiesObjects && !filter.showDynamic"> <div table-objects-chart ng-model="data.chartsData.companiesObjects" splitted="data.splitCharts"></div> </div> <div class="table-container" ng-if="filter.showTable && data.chartsData.dynamicObjects && filter.showDynamic"> <div table-dynamic-objects-chart ng-model="data.chartsData.dynamicObjects" splitted="data.splitCharts"></div> </div> <div class="row half-height-padded"> <div class="dash-item one-rows col-sm-12" ng-hide="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextContractors = !filter.tiltXAxisTextContractors"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header">Распределение по подрядчикам <button ng-show="filter.attributeName === 'npv'" type="button" class="btn btn-sm btn-default" ng-model="filter.lineId" bs-options="line.id as line.name for line in data.lines" placeholder="тип подрядчика" bs-select> <span class="caret"></span> </button> <br><span class="dimension">{{data.chartsData.contractors.uom}}</span></h4> <div class="dash-item-chart"> <save-svg-btn file-name="Физика {{data.chartsData.contractors.displayName}} по подрядчикам"></save-svg-btn> <div grouped-bar-chart ng-model="data.chartsData.contractors" show-values="filter.showValues" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" tilt-x-axis-text="filter.tiltXAxisTextContractors" axis-offset-x="50" axis-offset-y="50" bar-colors="onlyFactChatsColor"></div> <div class="dash-item-no-data" ng-hide="data.chartsData.contractors"><p>Скважины не бурились в этот промежуток времени.</div> </div> <div class="table-container" ng-show="filter.showTable && data.chartsData.contractors"> <div table-contractors-chart contractors="data.chartsData.contractors.values" contractors-src="data.chartsData.contractorsSrc.values" format="{{data.chartsData.contractors.format}}" dimension="{{data.chartsData.companies.uom}}" line-header="{{'Тип услуги'}}"></div> </div> </div> <div class="dash-item one-rows col-sm-6" ng-show="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextNnsContractors = !filter.tiltXAxisTextNnsContractors"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header">ННС распределение по подрядчикам <br><span class="dimension">{{data.chartsData.nnsContractors.uom}}</span></h4> <div class="dash-item-chart"> <save-svg-btn file-name="Физика НСС {{data.chartsData.nnsContractors.displayName}} по подрядчикам"></save-svg-btn> <div grouped-bar-chart ng-model="data.chartsData.nnsContractors" show-values="filter.showValues" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" tilt-x-axis-text="filter.tiltXAxisTextNnsContractors" axis-offset-x="50" axis-offset-y="50" bar-colors="onlyFactChatsColor"></div> <div class="dash-item-no-data" ng-hide="data.chartsData.nnsContractors"><p>Скважины не бурились в этот промежуток времени.</div> </div> <div class="table-container" ng-show="filter.showTable && data.chartsData.nnsContractors"> <div table-contractors-chart contractors="data.chartsData.nnsContractors.values" contractors-src="data.chartsData.nnsContractorsSrc.values" format="{{data.chartsData.nnsContractors.format}}" dimension="{{data.chartsData.companies.uom}}" line-header="{{'Тип услуги'}}"></div> </div> </div> <div class="dash-item one-rows col-sm-6" ng-show="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextGsContractors = !filter.tiltXAxisTextGsContractors"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header">ГС распределение по подрядчикам<br><span class="dimension">{{data.chartsData.gsContractors.uom}}</span></h4> <div class="dash-item-chart"> <save-svg-btn file-name="Физика ГС {{data.chartsData.gsContractors.displayName}} по подрядчикам"></save-svg-btn> <div grouped-bar-chart ng-model="data.chartsData.gsContractors" show-values="filter.showValues" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" tilt-x-axis-text="filter.tiltXAxisTextGsContractors" axis-offset-x="50" axis-offset-y="50" bar-colors="onlyFactChatsColor"></div> <div class="dash-item-no-data" ng-hide="data.chartsData.gsContractors"><p>Скважины не бурились в этот промежуток времени.</div> </div> <div class="table-container" ng-show="filter.showTable && data.chartsData.gsContractors"> <div table-contractors-chart contractors="data.chartsData.gsContractors.values" contractors-src="data.chartsData.gsContractorsSrc.values" format="{{data.chartsData.gsContractors.format}}" dimension="{{data.chartsData.companies.uom}}" line-header="{{'Тип услуги'}}"></div> </div> </div> </div> </div> <div class="legend col-sm-12"> <div class="fact-legend"> <span class="legend-color fact-legend-color"></span> <span class="legend-label">- факт</span> </div> <div class="previous-fact-legend"> <span class="legend-color previous-fact-legend-color"></span> <span class="legend-label">- факт за предыдущий год</span> </div> <div class="select-values"> <label class="checkbox-inline"> <input type="checkbox" ng-model="filter.showValues"> показывать значения </label> </div> </div> </div> </div> 