<div class="field-chart-container"> <div ng-hide="data.loaded" class="full-height text-primary"> <centered-fa-spinner></centered-fa-spinner> </div> <div ng-show="data.loaded" class="container-fluid smb-static-height pvchart-filters"> <div class="filters-container"> <table width="100%"> <tbody> <tr> <td> <smb-triple-data-switch ng-model="filter.drillType"></smb-triple-data-switch> </td> <td class="text-center" ng-show="filter.wellState !== 4"> <smb-triple-period-switch ng-model="filter.timeKey"></smb-triple-period-switch> <period-counter time-key="filter.timeKey" time-count="filter.timeCount"></period-counter> </td> <td class="text-right"> <smb-triple-type-switch ng-model="filter.wellState"></smb-triple-type-switch> <smb-double-view-switch show-excel="true" excel-handler="getExcel()"></smb-double-view-switch> </td> </tr> </tbody> </table> </div> <div class="sub-heading"> <a class="choice" href="#/physicalData">Данные по всей компаниии</a> <i class="fa fa-long-arrow-right"></i> <span class="no-choice" ng-show="singleCompany()">Данные по компаниям</span> <a class="choice" ng-hide="singleCompany()" href="#/companiesChart/{{filter.attributeName}}">Данные по компаниям</a> <i class="fa fa-long-arrow-right"></i> <a class="choice" href="#/fieldsChart/{{filter.attributeName}}/{{data.company.UID}}">{{data.company.name}}</a> <i class="fa fa-long-arrow-right"></i> <a class="choice" data-animation="am-fade-and-slide-top" data-template="views/modals/fields.html" bs-modal="modal">{{data.field.name}}</a> </div> </div> <div ng-show="data.error" class="container-fluid wells-chart-content-container error-container"> <p class="error-message">Не удалось получить данные.</p> </div> <div ng-hide="data.chartsLoaded" class="container-fluid wells-chart-content-container error-container"> <centered-fa-spinner></centered-fa-spinner> </div> <div ng-show="data.loaded" class="container-fluid wells-chart-content-container"> <div class="charts-container"> <h4 class="field-chart-title"> <button type="button" class="btn btn-default" ng-model="filter.attributeName" bs-options="param as getAttributeNameWithUom(param) for param in data.params" placeholder="{{getAttributeNameWithUom(filter.attributeName)}}" bs-select> <span class="caret"></span> </button> <!--        <br/><span>{{data.chartsData.field.uom}}</span>--> </h4> <div class="row half-height-padded"> <div class="dash-item one-rows col-sm-12" ng-hide="data.splitCharts"> <div class="dash-item-chart no-header"> <div class="dash-item-chart-wrapper"> <div class="dash-item-chart-container"> <save-svg-btn file-name="Физика {{data.chartsData.field.displayName}} месторождение {{data.field.name}}"></save-svg-btn> <grouped-bar-chart ng-model="data.chartsData.field" show-values="filter.showValues" show-average-lines="!filter.hideAllAverageLines && filter.showAverageLines" show-markers="(filter.timeKey === 'year')?filter.showMarkersYear:filter.showMarkers" reverse-markers="filter.reverseMarkers" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" axis-offset-x="50" axis-offset-y="50" bar-colors="(filter.timeKey === 'year')?onlyFactChatsColor:factChatsColor"></grouped-bar-chart> </div> <div class="dash-item-chart-legend" ng-show="data.chartsData.field"> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average"><input type="checkbox" ng-model="filter.showAverageLines[0]"> Среднее, {{data.chartsData.field.averageLines[0].value | round:data.chartsData.field.roundTo}} {{data.chartsData.field.uom || data.chartsData.fieldNns.uom || data.chartsData.fieldGs.uom}}</label></div> <!--<div class="checkbox"><label class="prev-average"><input type="checkbox" ng-model="filter.showPrevAverage"> Среднее предыдущее, {{data.chartsData.field.averageLines[1].value}} {{data.chartsData.field.uom || data.chartsData.fieldNns.uom || data.chartsData.fieldGs.uom}}</label></div>--> <div ng-hide="filter.timeKey === 'year'"> <!--<div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarker00"> min/max план ▲</label></div>--> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkers[0][1]"> min/max факт ■</label></div> </div> <div ng-show="filter.timeKey === 'year'"> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYear[0][0]"> min/max факт ▲</label></div> </div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showTable"> Табличное представление</label></div> </div> </div> <div class="dash-item-no-data" ng-hide="data.chartsData.field"><p>Скважины не бурились в этот промежуток времени.</div> </div> </div> <div class="dash-item one-rows col-sm-6" ng-show="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextNns = !filter.tiltXAxisTextNns"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header"> <div class="dash-item-sub-header"> <div class="sub-header-title">ННС</div> <div class="sub-header-filter"> <button type="button" class="btn btn-sm btn-default" ng-model="filter.nnsDn7Filter" bs-options="filter.id as filter.name for filter in data.nnsDn7Filters" bs-select> <span class="caret"></span> </button> </div> </div> </h4> <div class="dash-item-chart"> <div class="dash-item-chart-wrapper"> <div class="dash-item-chart-container"> <save-svg-btn file-name="Физика ННС {{data.chartsData.fieldNns.displayName}} месторождение {{data.field.name}}"></save-svg-btn> <grouped-bar-chart ng-model="data.chartsData.fieldNns" show-values="filter.showValues" show-average-lines="!filter.hideAllAverageLines && filter.showAverageLinesNns" show-markers="(filter.timeKey === 'year')?filter.showMarkersYearNns:filter.showMarkersNns" reverse-markers="filter.reverseMarkers" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tilt-x-axis-text="filter.tiltXAxisTextNns" tip-height="35" axis-offset-x="50" axis-offset-y="50" bar-colors="(filter.timeKey === 'year')?onlyFactChatsColor:factChatsColor"></grouped-bar-chart> </div> <div class="dash-item-chart-legend" ng-show="data.chartsData.fieldNns && !data.fieldNnsError && data.fieldNnsLoaded"> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average"><input type="checkbox" ng-model="filter.showAverageLinesNns[0]"> Среднее ННС, {{data.chartsData.fieldNns.averageLines[0].value | round:data.chartsData.fieldNns.roundTo}} {{data.chartsData.fieldNns.uom}}</label></div> <!--<div class="checkbox"><label class="prev-average-nns"><input type="checkbox" ng-model="filter.showPrevAverageNns"> Среднее предыдущее ННС, {{data.chartsData.fieldNns.averageLines[0].value}} {{data.chartsData.fieldNns.uom}}</label></div>--> <div ng-hide="filter.timeKey === 'year'"> <!--<div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarker00Nns"> min/max план ▲</label></div>--> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersNns[0][1]"> min/max факт ■</label></div> </div> <div ng-show="filter.timeKey === 'year'"> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYearNns[0][0]"> min/max факт ▲</label></div> </div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showTableNns"> Табличное представление</label></div> </div> </div> <div class="dash-item-no-data" ng-hide="data.chartsData.fieldNns"><p>Скважины не бурились в этот промежуток времени.</div> <div class="dash-item-error" ng-show="data.fieldNnsError"><p>Не удалось загрузить данные</div> <div class="dash-item-error" ng-hide="data.fieldNnsLoaded"><centered-fa-spinner></centered-fa-spinner></div> </div> </div> <div class="dash-item one-rows col-sm-6" ng-show="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextGs = !filter.tiltXAxisTextGs"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header"> <div class="dash-item-sub-header"> <div class="sub-header-title">ГС</div> <div class="sub-header-filter"> <button type="button" class="btn btn-sm btn-default" ng-model="filter.gsDn7Filter" bs-options="filter.id as filter.name for filter in data.gsDn7Filters" data-placement="bottom-right" bs-select> <span class="caret"></span> </button> </div> </div> </h4> <div class="dash-item-chart"> <div class="dash-item-chart-wrapper"> <div class="dash-item-chart-container"> <save-svg-btn file-name="Физика ГС {{data.chartsData.fieldGs.displayName}} месторождение {{data.field.name}}"></save-svg-btn> <grouped-bar-chart ng-model="data.chartsData.fieldGs" show-values="filter.showValues" show-average-lines="!filter.hideAllAverageLines && filter.showAverageLinesGs" show-markers="(filter.timeKey === 'year')?filter.showMarkersYearGs:filter.showMarkersGs" reverse-markers="filter.reverseMarkers" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tilt-x-axis-text="filter.tiltXAxisTextGs" tip-height="35" axis-offset-x="50" axis-offset-y="50" bar-colors="(filter.timeKey === 'year')?onlyFactChatsColor:factChatsColor"></grouped-bar-chart> </div> <div class="dash-item-chart-legend" ng-show="data.chartsData.fieldGs && !data.fieldGsError && data.fieldGsLoaded"> <div class="checkbox" ng-hide="filter.hideAllAverageLines"><label class="average"><input type="checkbox" ng-model="filter.showAverageLinesGs[0]"> Среднее ГС, {{data.chartsData.fieldGs.averageLines[0].value | round:data.chartsData.fieldGs.roundTo}} {{data.chartsData.fieldGs.uom}}</label></div> <!--<div class="checkbox"><label class="prev-average-gs"><input type="checkbox" ng-model="filter.showPrevAverageGs"> Среднее предыдущее ГС, {{data.chartsData.fieldGs.averageLines[0].value}} {{data.chartsData.fieldGs.uom}}</label></div>--> <div ng-hide="filter.timeKey === 'year'"> <!--<div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarker00Gs"> min/max план ▲</label></div>--> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersGs[0][1]"> min/max факт ■</label></div> </div> <div ng-show="filter.timeKey === 'year'"> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showMarkersYearGs[0][0]"> min/max факт ▲</label></div> </div> <div class="checkbox"><label><input type="checkbox" ng-model="filter.showTableGs"> Табличное представление</label></div> </div> </div> <div class="dash-item-no-data" ng-hide="data.chartsData.fieldGs"><p>Скважины не бурились в этот промежуток времени.</div> <div class="dash-item-error" ng-show="data.fieldGsError"><p>Не удалось загрузить данные</div> <div class="dash-item-error" ng-hide="data.fieldGsLoaded"><centered-fa-spinner></centered-fa-spinner></div> </div> </div> </div> <div class="row" ng-show="data.splitCharts"> <div class="col-sm-6"> <div class="table-container" ng-show="filter.showTableNns && data.chartsData.fieldNnsObjects && !data.fieldNnsError && data.fieldNnsLoaded"> <div table-objects-chart ng-model="data.chartsData.fieldNnsObjects" splitted="false"></div> </div> </div> <div class="col-sm-6"> <div class="table-container" ng-show="filter.showTableGs && data.chartsData.fieldGsObjects && !data.fieldGsError && data.fieldGsLoaded"> <div table-objects-chart ng-model="data.chartsData.fieldGsObjects" splitted="false"></div> </div> </div> </div> <div class="table-container" ng-show="filter.showTable && data.chartsData.fieldObjects && !data.splitCharts"> <div table-objects-chart ng-model="data.chartsData.fieldObjects" splitted="false"></div> </div> <div class="row half-height-padded"> <div class="dash-item one-rows col-sm-12" ng-hide="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextContractors = !filter.tiltXAxisTextContractors"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header">Распределение по подрядчикам <button ng-show="filter.attributeName === 'nonProductivePc'" type="button" class="btn btn-sm btn-default" ng-model="filter.lineId" bs-options="line.id as line.name for line in data.lines" placeholder="тип подрядчика" bs-select> <span class="caret"></span> </button> <br><span class="dimension">{{data.chartsData.contractors.uom}}</span></h4> <div class="dash-item-chart"> <save-svg-btn file-name="Физика {{data.chartsData.contractors.displayName}} месторождение {{data.field.name}} по подрядчикам"></save-svg-btn> <div grouped-bar-chart ng-model="data.chartsData.contractors" show-values="filter.showValues" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" tilt-x-axis-text="filter.tiltXAxisTextContractors" axis-offset-x="50" axis-offset-y="50" bar-colors="onlyFactChatsColor"></div> <div class="dash-item-no-data" ng-hide="data.chartsData.contractors"><p>Скважины не бурились в этот промежуток времени.</div> </div> <div class="table-container" ng-show="filter.showTable && data.chartsData.contractors"> <div table-contractors-chart contractors="data.chartsData.contractors.values" contractors-src="data.chartsData.contractorsSrc.values" format="{{data.chartsData.contractors.format}}" dimension="{{data.chartsData.field.uom}}" line-header="{{'Тип услуги'}}"></div> </div> </div> <div class="dash-item one-rows col-sm-6" ng-show="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextNnsContractors = !filter.tiltXAxisTextNnsContractors"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header">ННС распределение по подрядчикам<br><span class="dimension">{{data.chartsData.nnsContractors.uom}}</span></h4> <div class="dash-item-chart"> <save-svg-btn file-name="Физика ННС {{data.chartsData.nnsContractors.displayName}} месторождение {{data.field.name}} по подрядчикам"></save-svg-btn> <div grouped-bar-chart ng-model="data.chartsData.nnsContractors" show-values="filter.showValues" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" tilt-x-axis-text="filter.tiltXAxisTextNnsContractors" axis-offset-x="50" axis-offset-y="50" bar-colors="onlyFactChatsColor"></div> <div class="dash-item-no-data" ng-hide="data.chartsData.nnsContractors"><p>Скважины не бурились в этот промежуток времени.</div> </div> <div class="table-container" ng-show="filter.showTableNns && data.chartsData.nnsContractors"> <div table-contractors-chart contractors="data.chartsData.nnsContractors.values" contractors-src="data.chartsData.nnsContractorsSrc.values" format="{{data.chartsData.nnsContractors.format}}" dimension="{{data.chartsData.fieldNns.uom}}" line-header="{{'Тип услуги'}}"></div> </div> </div> <div class="dash-item one-rows col-sm-6" ng-show="data.splitCharts"> <button class="rotate-btn" ng-click="filter.tiltXAxisTextGsContractors = !filter.tiltXAxisTextGsContractors"><i class="fa fa-rotate-left"></i></button> <h4 class="dash-item-header">ГС распределение по подрядчикам<br><span class="dimension">{{data.chartsData.gsContractors.uom}}</span></h4> <div class="dash-item-chart"> <save-svg-btn file-name="Физика ГС {{data.chartsData.gsContractors.displayName}} месторождение {{data.field.name}} по подрядчикам"></save-svg-btn> <div grouped-bar-chart ng-model="data.chartsData.gsContractors" show-values="filter.showValues" tip-class="grouped-chart-tip" title-tip-class="grouped-chart-tip-title" tip-height="35" tilt-x-axis-text="filter.tiltXAxisTextGsContractors" axis-offset-x="50" axis-offset-y="50" bar-colors="onlyFactChatsColor"></div> <div class="dash-item-no-data" ng-hide="data.chartsData.gsContractors"><p>Скважины не бурились в этот промежуток времени.</div> </div> <div class="table-container" ng-show="filter.showTableGs && data.chartsData.gsContractors"> <div table-contractors-chart contractors="data.chartsData.gsContractors.values" contractors-src="data.chartsData.gsContractorsSrc.values" format="{{data.chartsData.gsContractors.format}}" dimension="{{data.chartsData.fieldGs.uom}}" line-header="{{'Тип услуги'}}"></div> </div> </div> </div> </div> <div class="legend col-sm-12"> <div class="fact-legend"> <span class="legend-color fact-legend-color"></span> <span class="legend-label">- факт</span> </div> <div class="previous-fact-legend"> <span class="legend-color previous-fact-legend-color"></span> <span class="legend-label">- факт за предыдущий год</span> </div> <div class="select-values"> <label class="checkbox-inline"> <input type="checkbox" ng-model="filter.showValues"> показывать значения </label> </div> </div> </div> </div> 